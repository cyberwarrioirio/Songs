<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Music</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#0f1724;color:#e6eef8;margin:0;padding:20px}
    .container{max-width:980px;margin:0 auto}
    header{display:flex;align-items:center;gap:16px;margin-bottom:18px}
    header img{width:64px;height:64px;object-fit:cover;border-radius:8px}
    h1{margin:0;font-size:20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:14px}
    .card{background:#0b1220;border:1px solid #172033;padding:12px;border-radius:8px}
    .thumb{width:100%;height:140px;object-fit:cover;border-radius:6px;margin-bottom:8px}
    .title{font-weight:700;margin:0 0 6px 0}
    .meta{font-size:13px;color:#9fb0c8;margin-bottom:8px}
    audio{width:100%}
    .note{font-size:13px;color:#9fb0c8;margin-top:12px}
    .btn{display:inline-block;padding:8px 12px;background:#18314a;color:#fff;border-radius:6px;text-decoration:none}
    .small{font-size:13px;color:#9fb0c8}
    .center{text-align:center}
    /* responsive */
    @media (max-width:420px){.thumb{height:110px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <img src="assets/cover.jpg" alt="site cover" id="siteCover" />
      <div>
        <h1>My Music</h1>
        <div class="small">Simple, folder-based music site — upload files to your repo and update playlist.json</div>
      </div>
    </header>

    <div id="tracks" class="grid">
      <!-- JS will render tracks here -->
    </div>

    <p class="note">Note: This site reads <code>playlist.json</code> from the same folder. Put your audio files and thumbnails in the repo and update that JSON. See instructions below.</p>

    <div class="center" style="margin-top:18px">
      <a class="btn" href="#howto">How to use</a>
    </div>

    <section id="howto" style="margin-top:22px;background:#071223;padding:12px;border-radius:8px;border:1px solid #112036">
      <h3 style="margin-top:0">How to use (quick)</h3>
      <ol style="color:#9fb0c8">
        <li>In your GitHub repo create folders for songs (e.g. <code>rock/</code>, <code>pop/</code>) or put them in one <code>audio/</code> folder.</li>
        <li>Upload audio files (mp3, m4a) and thumbnail images (jpg/png) — recommended names: <code>song-name.mp3</code> and <code>song-name.jpg</code>.</li>
        <li>Create a file <code>playlist.json</code> in the same directory with this site (example below).</li>
        <li>Enable GitHub Pages for the repo. Your site will show the list automatically.</li>
        <li>To add new songs: upload files and add an entry to <code>playlist.json</code>.</li>
      </ol>

      <h4 style="margin-bottom:6px">Example <code>playlist.json</code> (put in repo root)</h4>
      <pre style="background:#021323;color:#a7d0e8;padding:8px;border-radius:6px;overflow:auto">[
  {
    "title": "First Song",
    "artist": "Your Name",
    "audio": "audio/first-song.mp3",
    "thumb": "audio/first-song.jpg"
  },
  {
    "title": "Second Song",
    "artist": "Another Artist",
    "audio": "pop/second-song.mp3",
    "thumb": "pop/second-song.jpg"
  }
]</pre>

      <h4 style="margin-top:8px">Notes</h4>
      <ul style="color:#9fb0c8">
        <li>GitHub Pages serves static files only — you'll upload audio files via GitHub (or drag & drop to GitHub web UI).</li>
        <li>Make sure paths in <code>playlist.json</code> match the folder structure in your repo.</li>
        <li>If you don't want to maintain JSON, you can also edit <code>index.html</code> and add cards manually — but JSON is easier for many songs.</li>
      </ul>
    </section>
  </div>

<script>
// fetch playlist.json and render
async function loadPlaylist(){
  const container = document.getElementById('tracks');
  try{
    const res = await fetch('playlist.json', {cache: 'no-store'});
    if(!res.ok) throw new Error('No playlist.json');
    const list = await res.json();
    if(!Array.isArray(list)) throw new Error('Invalid playlist format');

    container.innerHTML = '';
    list.forEach(item => {
      const card = document.createElement('div'); card.className='card';
      const thumb = document.createElement('img'); thumb.className='thumb';
      thumb.src = item.thumb || 'assets/default-thumb.jpg';
      thumb.alt = item.title || 'thumb';

      const title = document.createElement('div'); title.className='title'; title.textContent = item.title || 'Untitled';
      const meta = document.createElement('div'); meta.className='meta'; meta.textContent = item.artist || '';
      const audio = document.createElement('audio'); audio.controls = true; audio.src = item.audio || '';

      card.appendChild(thumb);
      card.appendChild(title);
      card.appendChild(meta);
      card.appendChild(audio);
      container.appendChild(card);
    });
  }catch(err){
    container.innerHTML = '<div style="color:#f3c6c6">Could not load playlist.json — open README or add songs manually.</div>';
    console.warn(err);
  }
}

loadPlaylist();
</script>
</body>
</html>
